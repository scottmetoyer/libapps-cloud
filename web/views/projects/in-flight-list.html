<div ng-controller="ProjectListCtrl as projects">
  <div class="page-header m-b-0">
    <div class="row">
      <div class="col-md-6">
        <h1><span class="text-muted font-weight-light">Projects / </span>In-flight</h1>
      </div>
      <div class="col-xs-12 width-md-auto width-lg-auto width-xl-auto pull-md-right">
        <a href ui-sref="projects.presentation" class="btn btn-success"><span
            class="btn-label-icon left ion-images" target="_blank"></span>Presentation mode</a>&nbsp;

        <a href ui-sref="projects.create" class="btn btn-primary"><span
            class="btn-label-icon left ion-plus-round"></span>Create a project</a>
      </div>
    </div>
  </div>
  <div class="page-wide-block p-a-4 bg-white font-size-15">
    <p>
      Projects that are in execution.
    </p>
  </div>
  <hr class="page-wide-block m-t-0">
  <div class="row">
    <div class="col-md-12">
      <p ng-show="projects.projects.length == 0">There are no projects in-flight. Kick some off from the <a href
          ui-sref="projects.backlog">backlog</a>.</p>
      <div class="table-light">
        <table datatable="ng" class="table table-bordered table-striped" id="projects"
          ng-show="projects.projects.length > 0" dt-column-defs="projects.columnDefs" dt-state-save="true">
          <thead>
            <tr>
              <th>Name</th>
              <th style="width: 12%">Status</th>
              <th>Lead</th>
              <th>Owner</th>
              <th style="width: 35%">Latest Update</th>
            </tr>
          </thead>
          <tbody>
            <tr ng-repeat="p in projects.projects">
              <td><a href ui-sref="projects.view({ id: p.id })">{{ p.name }}</a></td>
              <td><i class="ion-record {{ p.statusClass }}"></i>&nbsp;{{ p.status }}</td>
              <td>{{ p.lead }}</td>
              <td>{{ p.owner }}</td>
              <td>
                <div class="widget-comments-item p-t-0" ng-show="p.latestUpdate != null">
                  <div class="widget-comments-header">
                    <a href="#" title="">{{ p.latestUpdate.user }}</a> commented:
                  </div>
                  <div class="widget-comments-text">
                    {{ p.latestUpdate.text }}
                  </div>
                  <div class="widget-comments-footer">
                    {{ p.latestUpdate.timestamp | humandate }}
                  </div>
                </div>

              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <script type="text/javascript">
    $(function () {
      /*
      $('#projects').sortable({
        containerSelector: 'table',
        itemPath: '> tbody',
        itemSelector: 'tr',
        placeholder: '<tr class="placeholder">'
      });*/
    });
  </script>
</div>