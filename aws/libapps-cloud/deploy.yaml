AWSTemplateFormatVersion: '2010-09-09'
Description: UCR Library LibApps Cloud applicaton
Resources:
  ApiGatewayApi:
    Properties:
      DefinitionUri: s3://libapps-cloud-deployment/7dde2f57f170d234939bf69b0b96862e
      StageName: Prod
      Variables:
        LambdaFunctionName:
          Ref: Projects
    Type: AWS::Serverless::Api
  ProjectUpdatesTable:
    Properties:
      PrimaryKey:
        Name: key
        Type: String
      ProvisionedThroughput:
        ReadCapacityUnits: 5
        WriteCapacityUnits: 5
    Type: AWS::Serverless::SimpleTable
  Projects:
    Properties:
      CodeUri: s3://libapps-cloud-deployment/297a243a3a8df8866b80ffc2ef0ccb41
      Environment:
        Variables:
          PROJECTS_TABLE_NAME:
            Ref: ProjectsTable
      Events:
        CreateProject:
          Properties:
            Method: post
            Path: /projects
          Type: Api
        ListProjects:
          Properties:
            Method: get
            Path: /projects
          Type: Api
        Project:
          Properties:
            Method: any
            Path: /project/{project}
          Type: Api
      Handler: projects.handler
      Policies: AmazonDynamoDBFullAccess
      Runtime: nodejs6.10
    Type: AWS::Serverless::Function
  ProjectsTable:
    Properties:
      PrimaryKey:
        Name: key
        Type: String
      ProvisionedThroughput:
        ReadCapacityUnits: 5
        WriteCapacityUnits: 5
    Type: AWS::Serverless::SimpleTable
  RecurringTaskInstancesTable:
    Properties:
      PrimaryKey:
        Name: id
        Type: String
      ProvisionedThroughput:
        ReadCapacityUnits: 5
        WriteCapacityUnits: 5
    Type: AWS::Serverless::SimpleTable
  RecurringTasksTable:
    Properties:
      PrimaryKey:
        Name: id
        Type: String
      ProvisionedThroughput:
        ReadCapacityUnits: 5
        WriteCapacityUnits: 5
    Type: AWS::Serverless::SimpleTable
  RequestsTable:
    Properties:
      PrimaryKey:
        Name: id
        Type: String
      ProvisionedThroughput:
        ReadCapacityUnits: 5
        WriteCapacityUnits: 5
    Type: AWS::Serverless::SimpleTable
Transform: AWS::Serverless-2016-10-31
